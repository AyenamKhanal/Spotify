{% extends "layout1.html" %}

{% block title %}
    Home
{% endblock %}

{% block js %} 
<script>
    function autoSubmitForm1() {
        document.getElementById('tracks-time-period').submit();
    }

    function autoSubmitForm2() {
        document.getElementById('artists-time-period').submit();
    }
</script>

{% endblock %}

{% block main %}

<h2 id="welcome">
    Welcome {{ user_name }},
    <!-- img src="{{ user_profile_pic }}" alt="" -->
</h2>

<div class="container">
    <div class="table-container"> 
        <h4 class="heading">Top Tracks</h4> 
        <form id="tracks-time-period" action="/home" method="get">
            <select name="track-time" onchange="autoSubmitForm1()">
                <option value="short_term" {% if track_time_range == 'short_term' %}selected{% endif %}>This Month</option>
                <option value="medium_term" {% if track_time_range == 'medium_term' %}selected{% endif %}>6 Months</option>
                <option value="long_term" {% if track_time_range == 'long_term' %}selected{% endif %}>This Year</option>
            </select>   
            <!-- Hidden input to store the current artist-time value -->
            <input type="hidden" id="hidden-artist-time" name="artist-time" value="{{ artist_time_range }}">
        </form>     
        <ol>
            {% for track in tracks %}

                <li>{{ track }}
                    <img src="{{ covers[loop.index0] }}" alt="" class="home-images">
                </li>
                
            {% endfor %}
        </ol>   
    </div>
    <div class="table-container">
        <h4 class="heading">Top Artists</h4>
        <form id="artists-time-period" action="/home" method="get">
            <select name="artist-time" onchange="autoSubmitForm2()">
                <option value="short_term" {% if artist_time_range == 'short_term' %}selected{% endif %}>This Month</option>
                <option value="medium_term" {% if artist_time_range == 'medium_term' %}selected{% endif %}>6 Months</option>
                <option value="long_term" {% if artist_time_range == 'long_term' %}selected{% endif %}>This Year</option>
            </select>   
            <!-- Hidden input to store the current track-time value -->
            <input type="hidden" id="hidden-track-time" name="track-time" value="{{ track_time_range }}">
        </form>        
        <ol>
            {% for artist in artists %}
                <li>
                    {{ artist }}
                    <img src="{{ artists_profile_pics[loop.index0] }}" alt="" class="home-images">
                </li>
            {% endfor %}
        </ol>   
    </div>
</div>
    
{% endblock %}



